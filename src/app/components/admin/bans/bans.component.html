<p-table
  [value]="bans"
  [paginator]="true"
  [rows]="rows"
  [first]="first"
  [lazy]="true"
  [totalRecords]="total"
  [tableStyle]="{ 'min-width': '100rem' }"
  [loading]="loading"
  sortField="member.name"
  (onLazyLoad)="onLazyLoad($event)">
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="member.name" class="min-w-[270px]">
        Membre <p-sortIcon field="member.name" />
      </th>
      <th pSortableColumn="author.name" class="min-w-[270px]">
        Banni par <p-sortIcon field="author.name" />
      </th>
      <th pSortableColumn="approver.name" class="min-w-[270px]">
        Approuvé par <p-sortIcon field="approver.name" />
      </th>
      <th pSortableColumn="reason" class="min-w-[270px]">Raison</th>
      <th pSortableColumn="banDate" class="min-w-[255px]">
        Date de ban <p-sortIcon field="banDate" />
      </th>
      <th pSortableColumn="unbanDate" class="min-w-[255px]">
        Date de déban <p-sortIcon field="unbanDate" />
      </th>
    </tr>
    <tr>
      <th>
        <p-columnFilter
          type="text"
          field="member.name"
          matchMode="contains"
          placeholder="Rechercher un membre"
          class="block max-w-[250px]" />
      </th>
      <th>
        <p-columnFilter
          type="text"
          field="author.name"
          matchMode="contains"
          placeholder="Rechercher un membre"
          class="block max-w-[250px]" />
      </th>
      <th>
        <p-columnFilter
          type="text"
          field="approver.name"
          matchMode="contains"
          placeholder="Rechercher un membre"
          class="block max-w-[250px]" />
      </th>
      <th>
        <p-columnFilter
          type="text"
          field="reason"
          matchMode="contains"
          placeholder="Rechercher une raison"
          class="block max-w-[250px]" />
      </th>
      <th>
        <p-columnFilter
          type="date"
          field="banDate"
          matchMode="dateIs"
          placeholder="Rechercher une date"
          class="block max-w-[250px]" />
      </th>
      <th>
        <p-columnFilter
          type="date"
          field="unbanDate"
          matchMode="dateIs"
          placeholder="Rechercher une date"
          class="block max-w-[250px]" />
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr style="height: 64px">
      <td colspan="6" class="text-center">Aucun résultat</td>
    </tr>
  </ng-template>
  <ng-template pTemplate="loadingbody">
    <ng-container *ngIf="bans.length === 0">
      <ng-container *ngFor="let i of [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]">
        <tr style="height: 64px">
          <td class="w-[270px]">
            <div class="flex items-center">
              <p-skeleton shape="circle" size="42px" styleClass="me-4" />
              <p-skeleton width="10rem" />
            </div>
          </td>
          <td class="w-[270px]">
            <div class="flex items-center">
              <p-skeleton shape="circle" size="42px" styleClass="me-4" />
              <p-skeleton width="10rem" />
            </div>
          </td>
          <td class="w-[270px]">
            <div class="flex items-center">
              <p-skeleton shape="circle" size="42px" styleClass="me-4" />
              <p-skeleton width="10rem" />
            </div>
          </td>
          <td class="w-[270px]"><p-skeleton /></td>
          <td class="w-[255px]"><p-skeleton width="10rem" /></td>
          <td class="w-[255px]"><p-skeleton width="10rem" /></td>
        </tr>
      </ng-container>
    </ng-container>
  </ng-template>
  <ng-template pTemplate="body" let-ban>
    <tr style="height: 64px">
      <td>
        <div class="flex items-center">
          <p-avatar
            [image]="ban.member.avatar"
            styleClass="flex me-4"
            size="large"
            shape="circle" />
          <span>
            {{ ban.member.name }}
          </span>
        </div>
      </td>
      <td>
        <div class="flex items-center">
          <p-avatar
            [image]="ban.author.avatar"
            styleClass="flex me-4"
            size="large"
            shape="circle" />
          <span>
            {{ ban.author.name }}
          </span>
        </div>
      </td>
      <td>
        <div class="flex items-center" *ngIf="ban.approver">
          <p-avatar
            [image]="ban.approver.avatar"
            styleClass="flex me-4"
            size="large"
            shape="circle" />
          <span>
            {{ ban.approver.name }}
          </span>
        </div>
      </td>
      <td>{{ ban.reason }}</td>
      <td>{{ ban.banDate }}</td>
      <td>{{ ban.unbanDate }}</td>
    </tr>
  </ng-template>
</p-table>
